# 科学计算

python 四舍五入求整数
```python
>>> x = 2.6
>>> int(x + 0.5)
>>> 3
```

对数、幂函数

python 版本
```python
>>> import math
>>> 
>>> math.exp(math.log(10))
10
```

js 版本
```js
Math.log10(100)
2
Math.pow(10, 2)
100
Math.log(100)
4.605170185988092
Math.exp(4.605170185988092)
100.00000000000004
```

工程应用：

先来分析X和Y数值变化特征
```js
Math.log(1)
0
Math.log(2)
0.6931471805599453
Math.log(20)
2.995732273553991
Math.log(100)
4.605170185988092
Math.log(1000)
6.907755278982137
Math.log(10000)
9.210340371976184
```

对数Y值变化量 远远小于 X值变化量

对于图形展示（例如气泡图），如果直接展示数值，差异太大，可以通过对数函数转化图形大小，缩小差异

选择合适的调整函数（对数）：
```
y = log(x+1)*5
```
对应的反函数（幂函数）为：
```
y = exp(x/5)-1
```

结果如下：
```python
>>> import math
>>> x = 6
>>> y = math.log(x+1)*5
>>> y
9.729550745276565
>>> math.exp(y/5)-1
5.999999999999998
```

```js
x = 6
6
y = Math.log(x+1)*5
9.729550745276565
Math.exp(y/5)-1
5.999999999999998
Math.round(5.9)
6
```

## 图形图像与算法（关于气泡图选用对数进行变形缩放）

- 图像问题：
数据中出现的极大值与极小值之间，数量级相差较大，极大值的气泡显示过大

- 算法需求：
1. 缩小极大值
2. 可逆
3. 保持单调性
4. 缩小极值之间差异

- 缩放思路：
1. 等比例缩放，缺陷：当个别极大值过大时，中间值可能会显示很小
2. 平方根，变形压缩了极大值，有效果。缺陷：缩放效果有限，当数量级相差很大，还是会存在极大值的气泡过大
3. 对数，进一步压缩了极大值，即使极大值相差很大，也不用担心，极大值与极小值的数量级可控制在相邻范围
4. 对数优化，以10为底，还是以自然常数e为底？以10为底的话，气泡大小相近，不便于肉眼区分，以e为底刚好
5. 进一步优化，自变量1万以内时，对数取值范围小于10，图上显示过小，这里再做一次等比例放大5倍，适合屏幕展示

- 最终结论：
调整函数（对数）：
```
y = log(x+1)*5
```
对应的反函数（幂函数）为：
```
y = exp(x/5)-1
```
