# 操作系统原理

## 进程
操作系统会以进程为单位，分配系统资源（CPU时间片、内存等资源），进程是资源分配的最小单位

## 线程
线程，有时被称为轻量级进程(Lightweight Process，LWP），是操作系统调度（CPU调度）执行的最小单位

## 亲缘性（亲和性）
亲缘性的意思是进程/线程只在某个cpu上运行（多核系统）

## 协程
协程，是一种比线程更加轻量级的存在，协程不是被操作系统内核所管理，而完全是由程序所控制（也就是在用户态执行）

名称 | 描述 | 通信 | 切换
--- | --- | --- | ---
进程 | 资源分配的最小单位、有独立内存空间 | 进程间通信 | 开销大、稳定
线程 | CPU调度的最小单位、共享内存空间(同进程的一组线程) | 共享内存(副作用: 需要加锁) | 开销小、不稳定
协程 | 用户态线程、非内核态系统调度 | python:队列、golang:管道 | 协程的context switch是在完全在用户态，由语言的runtime或者是库来完成，说人话就是用户通过程序控制

根据业务场景选择
- CPU密集型: 多线程
- IO密集型: 多进程 + 协程

进程间通信4中方式:
1、消息传递（管道(无名管道)、FIFO(命名管道)、消息队列）
2、同步（互斥量、条件变量、读写锁、文件和写记录锁、信号量）
3、共享内存（匿名的和具名的）
4、远程过程调用（Solaris门和Sun RPC）

## 进程的三种基本状态
- 就绪状态(Ready)
- 运行状态(Running)
- 阻塞状态(Blocked)

## 系统IO与标准IO

系统IO：由操作系统直接提供的接口函数
标准IO：由标准C库（第三方库）提供的接口函数（通过封装操作系统提供的系统IO，再给用户使用）

系统IO和标准IO的主要区别：
系统IO：不带缓冲机制，系统IO可以操作普通文件与驱动文件
标准IO：带缓冲机制，标准IO只可以操作普通文件。提供多种的格式的输入输出如（字符串、整形......）

## 文件系统

在windows下，一个文件有：创建时间、修改时间、访问时间。
而在Linux下，一个文件也有三种时间，分别是：访问时间、修改时间、状态改动时间。

两者有此不同，在Linux下没有创建时间的概念，也就是不能知道文件的建立时间，
但如果文件建立后就没有修改过，修改时间=建立时间;
如果文件建立后，状态就没有改动过，那么状态改动时间=建立时间;
如果文件建立后，没有被读取过，那么访问时间=建立时间，
因为不好判断文件是否被改过、读过、其状态是否变过，所以判断文件的建立时间基本上能为不可能。
